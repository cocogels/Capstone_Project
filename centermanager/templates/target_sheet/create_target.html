{% extends 'base.html' %}
{% load bootstrap4 %}


{% block header %}
{% include 'header.html' %}
{% endblock header %}

{% block sidebar %}

{% endblock sidebar %}

{% block navbar %}
{% include 'navbar.html' %}
{% endblock navbar %}

{% block title %}
<title>Marketing | Target Sheet</title>
{% endblock title %}


{% load crispy_forms_tags %}

{% block content %}
<div class="container-fluid">
    <a href="{% url 'centermanager:create_school_year' %}" class="btn float-left">
        <span class="text btn btn-info">Add School Year</span>
    </a>
    <br>
    <br>
    <br>
    <div class="card">
        <!-- Start of Breadcrumb -->

        <nav aria-label="breadcrumb" class="row" style="padding-top:2%; padding-right:2%; padding-left:2%;">
        {% if school_year_list  %}
            <h4>School Year {{ school_year_list.start_year }}</h4>
        {% endif %}
            <!-- Filter Field -->
            <div class="topbar-divider d-none d-sm-block" style="padding-right:68%"></div>
            <div class="input-group float-right" style="max-width: 20%;">

            </div>
        </nav>

        <!-- End of Bread Crumb -->
        <br>
        <!-- page content -->
        <div class="content-section">
            {% include 'messages.html' %}
            {{ school_year_list.start_year }}
            <!-- DIV FOR ADDING TARGET SHEET-->

            <div>
                <form id='school_year_filter' action="POST">
                    <div class='form-group'>
                        <input type="text">
                    </div>
                </form>
            </div>
            <div class="card card-deck float-left" style="min-width:30%; max-width:28%; margin-left:2%; ">
                <!-- BUTTON ADD TARGET SHEET-->
                <div class="card-body">
                    <div class="card-body">
                        <form class='ajax-form' action="." method="POST"
                            data-url='{{ request.build_absolute_url|safe }}' enctype="multipart/form-data">
                            {% csrf_token %}

                            <fieldset class="form-group">
                                {{ form|crispy }}

                            </fieldset>
                            <div class="row float-right " style="padding-right: 5%;">
                                <div class="form-group ">
                                    <button class="btn btn-outline-info" type="submit">Submit</button>
                                </div>
                                &nbsp
                                <div class="form-group float-left">
                                    <a href="{% url 'centermanager:target'%}" class="btn btn-outline-info">
                                        Cancel
                                    </a>
                                </div>
                            </div>
                    </div>
                    </form>
                </div>
            </div>



            <!-- DIV THAT SHOWS ALL THE ADDED SANCTION-->
            <div class=" card card-deck float-right" style="min-height:560px; min-width: 65%; margin-right: 2% ">

                <div class="card-body">
                    <center>
                        <div class="card" style="border-color: #36B9CC; max-width: 50%;">
                            <div class="card-body table-responsive-md">
                                <table class="table table-striped table-lg">
                                    <tr>
                                        <thead class="card-header">
                                            <tr>
                                                <th scope="col">Status</th>
                                                <th scope="col">School Year</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                    </tr>
                                    {% for school_year in school_year_list %}

                                    <tbody>
                                        <tr>
                                            <td>{{ school_year.active_year|yesno:'ACTIVE, INACTIVE' }}</td>
                                            <td>{{ school_year.start_year|date:'Y' }} - {{ school_year.end_year|date:'Y' }}</td>
                                            <td> <a href="">View</a> <td>
                                        </tr>
                                    </tbody>
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                    </center>
                    <br>
                </div>
            </div>
            <br><br>

<<<<<<< HEAD
=======
<!-- DIV THAT SHOWS ALL THE ADDED SANCTION-->       
<div class=" card card-deck float-right" style="min-height:560px; min-width: 65%; margin-right: 2% ">
    
    <div class="card-body"> 
        <center>
       <div class="card" style="border-color: #36B9CC; max-width: 50%;%">     
      
              
       <div class="card-body">   
       
       <table class="table table-sm">
              
                   <thead class="card-header">
                       <tr>
                       <th scope="col">Name</th>
                       <th scope="col">Target details</th>
                       </tr>
                   </thead>
                   <tbody>
        {% for target_sheet_record in target_sheet_obj %}                 
                       <tr>
                           <td>iCL: Corporate:</td>
                           <td>{{ target_sheet_record.corporate }}</td>
                       </tr>

                       <tr>
                           <td>ICL: Retail:</td>
                           <td>{{ target_sheet_record.retail }}</td>
                       </tr>
                       
                       <tr>    
                           <td>OWWA</td>
                           <td>{{ target_sheet_record.owwa }}</td>
                       
                       </tr>
                       <tr>
                           <td>Informatics Senior High School:</td>
                           <td>{{ target_sheet_record.seniorhigh }}</td>
                       </tr>

                       <tr>
                           <td>Informatics Higher Education:</td>
                           <td> {{ target_sheet_record.higher_ed }}</td>
                       </tr>
        {% endfor %}                
                   </tbody>
                   </table>

                                  
       </div>
   
</div>
</center>  
<br>
</div>
</div> 
<br><br>
>>>>>>> 180452339520ca24726b23483e4e66d43307c895


        </div>
    </div>
</div>
<br>


{% endblock content %}

{% block js_block %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />

<script>
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]); // Does this cookie string begin with the
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
            }
        }
        return cookieValue;
    }
    var
        csrftoken = getCookie('csrftoken');

    function csrfSafeMethod(method) { // these HTTP methods do not require CSRF
        protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    $.ajaxSetup({
        beforeSend: function (xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    })
    $(document).ready(function () {
        var $myForm = $('.ajax-form') 
        $myForm.submit(function (event) {
            event.preventDefault() 
            var $formData = $(this).serialize() 
            var $thisURL = $myForm.attr('data-url') || window.location.href 
            $.ajax({
                        method: 'POST',
                        url: $thisURL,
                        data: $formData,
                        success: handleFormSuccess,
                        error: handleFormError
                    })
        })
        function
        handleFormSuccess(data, textStatus, jqXHR) {
            console.log(data) 
            console.log(textStatus) 
            console.log(kqXHR)
            $myForm.reset();
        }

        function handleFormError(jqXHR, textStatus, errorThrown) {
            console.log(jqXHR)
            console.log(textStatus) 
            console.log(errorThrown)
        }
    })
</script>

{% endblock js_block %}
{% block footer %}
{% include 'footer.html' %}
{% endblock footer %}