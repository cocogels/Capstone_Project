{% extends 'root.html' %}
{% load static from staticfiles %}
{% load paginate %}
{% block extralinks %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<style>
    .form-group label {
        font-weight: 800;
    }
</style>
{% endblock extralinks %}


{% block content %}
<div class="row marl">
    <div class="col-lg-12 text-right">
        <span class="d-inline"><a class="primary_btn" href="{% url 'contacts:add_contact'%}"><i class="fa fa-plus"></i>
                Add New Contact</a></span>
    </div>
</div>

<div class="list_filter_row">
    <div class="card">
        <div class="card-body">
            <form method='POST' action="" id="contacts_filter">
                {% csrf_token %}
                <div class="card-body">
                    <div class="form-group">
                        <label for="">Name</label>
                        <input type="text" class="form-control" placeholder="Organization Name" name='name'
                            value="{{ request.POST.name }}">
                    </div>
                    <div class="form-group buttons_row">
                        <button class="btn btn-primary save" type="submit">
                            Search
                        </button>
                        <a href="{% url 'contacts:list' %}" class="btn btn-default clear"> Clear </a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <span class="float-left">Contacts -
            {% if show_pageitems %}
            {% show_pageitems %}{
            {% else %}
            {{contact_obj_list|length}}
            {% endif %}
        </span>
        <div class="table-responsive">
            <table>
                <thead>
                    {% if contact_obj_list|length > 0 %}
                    <tr>
                        <th>
                            #
                        </th>
                        <th>
                            Name
                        </th>
                        <th>
                            Type
                        </th>
                        <th>
                            Contact Person
                        </th>
                        <th>
                            Created On
                        </th>
                        <th>
                            Actions
                        </th>
                    </tr>
                </thead>
                {% endif %}
                <tbody>
                    {% if per_page %}
                    {% paginate per_page contact_obj_list %}
                    {% else %}
                    {% paginate 10 contact_obj_list %}
                    {% endif %}

                    {% for contact in contact_obj_list %}
                    <tr>
                        <td scope='row'>
                            {{ forloop.counter}}
                        </td>
                        <td>
                            {{ contact.name }}
                        </td>
                        <td>
                            {{ contact.org_type }}
                        </td>
                        <td>
                            {{ contact.person }}
                        </td>
                        <td title="{{contact.date_created}}">
                            {{ contact.created_on_arrow }}
                        </td>
                        <td class="actions">
                            <a href="{% url 'contacts:view_contact' contact.id %}" class="btn btn-info view" title="view">
                                View
                            </a>
                            <a href="{% url 'contacts:edit_contact' contact.id %}"  class="btn btn-success edit" title="Edit">
                               Edit
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
             {% if equal contact_obj_list|length 0 %}
             <h6 class="text-center">No Contact Records Found</h6>
             {%endifequal%}
             <div class="marl row text-center">
                 {% show_pages %}
             </div>
        </div>
    </div>
</div>
{% endblock content %}